

START TRANSACTION;

DROP TABLE IF EXISTS VIVERO;

/* Crear Tabla 'VIVERO' */

CREATE TABLE IF NOT EXISTS VIVERO (
    NOMBRE VARCHAR(30) NOT NULL,
    LOCALIDAD VARCHAR(30) NULL,
    LATITUD FLOAT NULL,
    LONGITUD FLOAT NULL,
    PRIMARY KEY (NOMBRE)
);

DROP TABLE IF EXISTS ZONA;

/* Crear Tabla 'ZONA' */

CREATE TABLE IF NOT EXISTS ZONA (
  NOMBRE VARCHAR(30) NOT NULL,
  VIVERO_NOMBRE VARCHAR(30) NOT NULL,
  PRIMARY KEY (NOMBRE),
  CONSTRAINT fk_ZONA_VIVERO
    FOREIGN KEY (VIVERO_NOMBRE)
    REFERENCES VIVERO (NOMBRE)
    ON DELETE CASCADE
    ON UPDATE CASCADE );

DROP TABLE IF EXISTS PRODUCTO;

/* Crear Tabla 'PRODUCTO' */

CREATE TABLE IF NOT EXISTS PRODUCTO (
  ID_PRODUCTO VARCHAR(20) NOT NULL,
  NOMBRE VARCHAR(30) NULL,
  PRECIO FLOAT NULL,
  STOCK INT NULL,
  PRIMARY KEY (ID_PRODUCTO));

DROP TABLE IF EXISTS CLIENTE;

/* Crear Tabla 'CLIENTE' */

CREATE TABLE IF NOT EXISTS CLIENTE (
  DNI VARCHAR(9) NOT NULL,
  BONUS FLOAT NULL,
  NUM_PEDIDOS INT NULL,
  PRIMARY KEY (DNI));

DROP TABLE IF EXISTS EMPLEADO;

/* Crear Tabla 'EMPLEADO' */

CREATE TABLE IF NOT EXISTS EMPLEADO (
  DNI VARCHAR(9) NOT NULL,
  SUELDO FLOAT NOT NULL,
  FECHA_INI TIMESTAMP NULL,
  FECHA_FIN TIMESTAMP NULL,
  VENTAS INT NULL,
  ZONA_NOMBRE VARCHAR(30) NOT NULL,
  PRIMARY KEY (DNI),
  CONSTRAINT fk_EMPLEADO_ZONA1
    FOREIGN KEY (ZONA_NOMBRE)
    REFERENCES ZONA (NOMBRE)
    ON DELETE CASCADE
    ON UPDATE CASCADE);


DROP TABLE IF EXISTS PRODUCTO_ZONA;

/* Crear Tabla 'PRODUCTO_ZONA' */

CREATE TABLE IF NOT EXISTS PRODUCTO_ZONA (
  ID_PRODUCTO VARCHAR(20) NOT NULL,
  ZONA_NOMBRE VARCHAR(30) NOT NULL,
  PRIMARY KEY (ID_PRODUCTO, ZONA_NOMBRE),
  CONSTRAINT fk_PRODUCTO_ZONA_PRODUCTO1
    FOREIGN KEY (ID_PRODUCTO)
    REFERENCES PRODUCTO (ID_PRODUCTO)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT fk_PRODUCTO_ZONA_ZONA1
    FOREIGN KEY (ZONA_NOMBRE)
    REFERENCES ZONA (NOMBRE)
    ON DELETE CASCADE
    ON UPDATE CASCADE);


DROP TABLE IF EXISTS COMPRA;

/* Crear Tabla 'COMPRA' */

CREATE TABLE IF NOT EXISTS COMPRA (
  ID_PRODUCTO VARCHAR(20) NOT NULL,
  CLIENTE_DNI VARCHAR(9) NOT NULL,
  FECHA TIMESTAMP NOT NULL,
  CANTIDAD INT NULL,
  EMPLEADO_DNI VARCHAR(9) NOT NULL,
  PRIMARY KEY (ID_PRODUCTO, CLIENTE_DNI, FECHA),
  CONSTRAINT fk_COMPRA_PRODUCTO
    FOREIGN KEY (ID_PRODUCTO)
    REFERENCES PRODUCTO (ID_PRODUCTO)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT fk_COMPRA_CLIENTE
    FOREIGN KEY (CLIENTE_DNI)
    REFERENCES CLIENTE (DNI)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT fk_COMPRA_EMPLEADO
    FOREIGN KEY (EMPLEADO_DNI)
    REFERENCES EMPLEADO (DNI)
    ON DELETE CASCADE
    ON UPDATE CASCADE);

COMMIT;

/* Introducir Datos Tabla 'VIVERO' */

START TRANSACTION;
INSERT INTO VIVERO (NOMBRE, LOCALIDAD, LATITUD, LONGITUD) VALUES ('Vivero_1', 'La Laguna', 28.483402, -16.304390);
INSERT INTO VIVERO (NOMBRE, LOCALIDAD, LATITUD, LONGITUD) VALUES ('Vivero_2', 'Tegueste', 28.523708, -16.340421);
INSERT INTO VIVERO (NOMBRE, LOCALIDAD, LATITUD, LONGITUD) VALUES ('Vivero_3', 'Buenavista', 28.375164, -16.850060);
INSERT INTO VIVERO (NOMBRE, LOCALIDAD, LATITUD, LONGITUD) VALUES ('Vivero_4', 'Arona', 28.098280, -16.677871);
INSERT INTO VIVERO (NOMBRE, LOCALIDAD, LATITUD, LONGITUD) VALUES ('Vivero_5', 'Radazul', 28.404713, -16.320063);

COMMIT;

/* Introducir Datos Tabla 'ZONA' */

START TRANSACTION;
INSERT INTO ZONA (NOMBRE, VIVERO_NOMBRE) VALUES ('Zona_1', 'Vivero_1');
INSERT INTO ZONA (NOMBRE, VIVERO_NOMBRE) VALUES ('Zona_2', 'Vivero_2');
INSERT INTO ZONA (NOMBRE, VIVERO_NOMBRE) VALUES ('Zona_3', 'Vivero_3');
INSERT INTO ZONA (NOMBRE, VIVERO_NOMBRE) VALUES ('Zona_4', 'Vivero_3');
INSERT INTO ZONA (NOMBRE, VIVERO_NOMBRE) VALUES ('Zona_5', 'Vivero_4');
INSERT INTO ZONA (NOMBRE, VIVERO_NOMBRE) VALUES ('Zona_6', 'Vivero_5');

COMMIT;

/* Introducir Datos Tabla 'PRODUCTO' */

START TRANSACTION;
INSERT INTO PRODUCTO (ID_PRODUCTO, NOMBRE, PRECIO, STOCK) VALUES ('00101', 'Azucena', 78, 7.85);
INSERT INTO PRODUCTO (ID_PRODUCTO, NOMBRE, PRECIO, STOCK) VALUES ('00102', 'Margarita', 86, 2.56);
INSERT INTO PRODUCTO (ID_PRODUCTO, NOMBRE, PRECIO, STOCK) VALUES ('00103', 'Lirio', 105, 6.00);
INSERT INTO PRODUCTO (ID_PRODUCTO, NOMBRE, PRECIO, STOCK) VALUES ('00104', 'Rosa', 78, 1.25);
INSERT INTO PRODUCTO (ID_PRODUCTO, NOMBRE, PRECIO, STOCK) VALUES ('00105', 'Tulipan', 212, 6.99);
INSERT INTO PRODUCTO (ID_PRODUCTO, NOMBRE, PRECIO, STOCK) VALUES ('00106', 'Orquidea', 23, 12.86);
INSERT INTO PRODUCTO (ID_PRODUCTO, NOMBRE, PRECIO, STOCK) VALUES ('00107', 'Amapola', 98, 9.99);
INSERT INTO PRODUCTO (ID_PRODUCTO, NOMBRE, PRECIO, STOCK) VALUES ('00108', 'Geranio', 145, 17.63);

COMMIT;

/* Introducir Datos Tabla 'CLIENTE' */

START TRANSACTION;
INSERT INTO CLIENTE (DNI, BONUS, NUM_PEDIDOS) VALUES ('11111111A', 20, 2);
INSERT INTO CLIENTE (DNI, BONUS, NUM_PEDIDOS) VALUES ('22222222B', 44, 5);
INSERT INTO CLIENTE (DNI, BONUS, NUM_PEDIDOS) VALUES ('33333333C', 32.5, 3);
INSERT INTO CLIENTE (DNI, BONUS, NUM_PEDIDOS) VALUES ('44444444D', 8, 1);
INSERT INTO CLIENTE (DNI, BONUS, NUM_PEDIDOS) VALUES ('55555555E', 17.5, 1);
INSERT INTO CLIENTE (DNI, BONUS, NUM_PEDIDOS) VALUES ('66666666F', 25, 3);
INSERT INTO CLIENTE (DNI, BONUS, NUM_PEDIDOS) VALUES ('77777777G', 34, 2);

COMMIT;

/* Introducir Datos Tabla 'EMPLEADO' */

START TRANSACTION;
INSERT INTO EMPLEADO (DNI, SUELDO, FECHA_INI, FECHA_FIN, VENTAS, ZONA_NOMBRE) VALUES ('12345678C', 1950.80, '2016-07-17 09:00:00', NULL, 3, 'Zona_1');
INSERT INTO EMPLEADO (DNI, SUELDO, FECHA_INI, FECHA_FIN, VENTAS, ZONA_NOMBRE) VALUES ('87654321W', 1678.00, '2018-01-18 09:00:00', NULL, 2, 'Zona_2');
INSERT INTO EMPLEADO (DNI, SUELDO, FECHA_INI, FECHA_FIN, VENTAS, ZONA_NOMBRE) VALUES ('23456789X', 1950.80, '2016-03-01 15:00:00', NULL, 1, 'Zona_2');
INSERT INTO EMPLEADO (DNI, SUELDO, FECHA_INI, FECHA_FIN, VENTAS, ZONA_NOMBRE) VALUES ('98765432K', 2000.00, '2015-10-25 15:00:00', NULL, 2, 'Zona_3');
INSERT INTO EMPLEADO (DNI, SUELDO, FECHA_INI, FECHA_FIN, VENTAS, ZONA_NOMBRE) VALUES ('13572468F', 1750.80, '2017-06-01 09:00:00', '2020-06-30 22:00:00', 0, 'Zona_1');
INSERT INTO EMPLEADO (DNI, SUELDO, FECHA_INI, FECHA_FIN, VENTAS, ZONA_NOMBRE) VALUES ('86427531H', 1750.80, '2017-06-01 09:00:00', NULL, 3, 'Zona_4');
INSERT INTO EMPLEADO (DNI, SUELDO, FECHA_INI, FECHA_FIN, VENTAS, ZONA_NOMBRE) VALUES ('67676767L', 2000.80, '2015-10-25 09:00:00', NULL, 4, 'Zona_5');
INSERT INTO EMPLEADO (DNI, SUELDO, FECHA_INI, FECHA_FIN, VENTAS, ZONA_NOMBRE) VALUES ('12341234M', 1650.80, '2021-10-01 09:00:00', NULL, 2, 'Zona_6');
INSERT INTO EMPLEADO (DNI, SUELDO, FECHA_INI, FECHA_FIN, VENTAS, ZONA_NOMBRE) VALUES ('99998888H', 1950.80, '2016-07-17 09:00:00', NULL, 1, 'Zona_5');


COMMIT;

/* Introducir Datos Tabla 'PRODUCTO_ZONA' */

START TRANSACTION;
INSERT INTO PRODUCTO_ZONA (ID_PRODUCTO, ZONA_NOMBRE) VALUES ('00101', 'Zona_1');
INSERT INTO PRODUCTO_ZONA (ID_PRODUCTO, ZONA_NOMBRE) VALUES ('00102', 'Zona_1');
INSERT INTO PRODUCTO_ZONA (ID_PRODUCTO, ZONA_NOMBRE) VALUES ('00103', 'Zona_4');
INSERT INTO PRODUCTO_ZONA (ID_PRODUCTO, ZONA_NOMBRE) VALUES ('00104', 'Zona_2');
INSERT INTO PRODUCTO_ZONA (ID_PRODUCTO, ZONA_NOMBRE) VALUES ('00105', 'Zona_3');
INSERT INTO PRODUCTO_ZONA (ID_PRODUCTO, ZONA_NOMBRE) VALUES ('00106', 'Zona_4');
INSERT INTO PRODUCTO_ZONA (ID_PRODUCTO, ZONA_NOMBRE) VALUES ('00107', 'Zona_6');
INSERT INTO PRODUCTO_ZONA (ID_PRODUCTO, ZONA_NOMBRE) VALUES ('00108', 'Zona_5');

COMMIT;

/* Introducir Datos Tabla 'COMPRA' */

START TRANSACTION;
INSERT INTO COMPRA (ID_PRODUCTO, CLIENTE_DNI, FECHA, CANTIDAD, EMPLEADO_DNI) VALUES ('00101', '11111111A', '2021-05-17 19:02:21', 6, '12345678C');
INSERT INTO COMPRA (ID_PRODUCTO, CLIENTE_DNI, FECHA, CANTIDAD, EMPLEADO_DNI) VALUES ('00102', '33333333C', '2021-05-21 15:42:54', 3, '12345678C');
INSERT INTO COMPRA (ID_PRODUCTO, CLIENTE_DNI, FECHA, CANTIDAD, EMPLEADO_DNI) VALUES ('00103', '44444444D', '2021-05-23 11:42:26', 5, '86427531H');
INSERT INTO COMPRA (ID_PRODUCTO, CLIENTE_DNI, FECHA, CANTIDAD, EMPLEADO_DNI) VALUES ('00104', '11111111A', '2021-05-23 12:17:40', 1, '87654321W');
INSERT INTO COMPRA (ID_PRODUCTO, CLIENTE_DNI, FECHA, CANTIDAD, EMPLEADO_DNI) VALUES ('00105', '77777777G', '2021-05-30 17:31:17', 4, '98765432K');
INSERT INTO COMPRA (ID_PRODUCTO, CLIENTE_DNI, FECHA, CANTIDAD, EMPLEADO_DNI) VALUES ('00106', '55555555E', '2021-06-02 19:14:26', 5, '86427531H');
INSERT INTO COMPRA (ID_PRODUCTO, CLIENTE_DNI, FECHA, CANTIDAD, EMPLEADO_DNI) VALUES ('00107', '22222222B', '2021-06-02 18:19:02', 8, '12341234M');
INSERT INTO COMPRA (ID_PRODUCTO, CLIENTE_DNI, FECHA, CANTIDAD, EMPLEADO_DNI) VALUES ('00108', '66666666F', '2021-06-04 12:27:22', 2, '99998888H');

COMMIT;
